
    <!DOCTYPE html>
    <html lang="zh-CN">
    <head>
    <meta charset="utf-8" />
    <title>BLE 自动化测试报告</title>
    <style>
    /* 基础样式保留，新增筛选区样式 */
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'PingFang SC', 'Microsoft YaHei', sans-serif; margin: 24px; }
    h1 { margin-bottom: 8px; }
    .summary { margin: 8px 0 16px; }
    .kpi span { display: inline-block; margin-right: 16px; padding: 6px 10px; border-radius: 8px; background: #f2f2f2; }
    /* 筛选区样式 */
    .filter-area { margin: 16px 0; padding: 12px; border: 1px solid #eee; border-radius: 8px; background: #fafafa; }
    .filter-row { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 8px; align-items: center; }
    .filter-label { font-weight: 500; color: #666; min-width: 80px; }
    .filter-input { padding: 6px 8px; border: 1px solid #ddd; border-radius: 4px; width: 180px; }
    .filter-btn { padding: 6px 16px; border: none; border-radius: 4px; background: #4285f4; color: white; cursor: pointer; }
    .filter-btn:hover { background: #3367d6; }
    /* 表格样式 */
    table { border-collapse: collapse; width: 100%; font-size: 14px; margin-top: 16px; }
    th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; vertical-align: top; }
    th { background: #fafafa; position: sticky; top: 0; z-index: 1; }
    tr:nth-child(even) { background: #fcfcfc; }
    tr.hidden { display: none; } /* 筛选隐藏行 */
    code { background: #f6f8fa; padding: 2px 4px; border-radius: 4px; }
    /* 响应式调整 */
    @media (max-width: 1200px) {
        .filter-row { flex-direction: column; align-items: flex-start; }
        .filter-label { min-width: auto; margin-bottom: 4px; }
        .filter-input { width: 100%; max-width: 300px; }
    }
    </style>
    </head>
    <body>
    <h1>BLE 自动化测试报告</h1>
    <div class="summary">
      <div>执行时间：2025-08-29 15:07:53</div>
      <div class="kpi">
        <span>总用例：<b>14</b></span>
        <span>通过：<b style="color:green">0</b></span>
        <span>失败：<b style="color:red">14</b></span>
        <span>通过率：<b>0.00%</b></span>
      </div>
    </div>

    <!-- 新增：筛选功能区 -->
    <div class="filter-area">
      <h3>表格筛选</h3>
      <!-- 筛选条件1：按用例结论（PASS/FAIL） -->
      <div class="filter-row">
        <div class="filter-label">用例结论：</div>
        <select id="filter-verdict" class="filter-input">
          <option value="">全部</option>
          <option value="PASS">通过（PASS）</option>
          <option value="FAIL">失败（FAIL）</option>
        </select>
      </div>
      <!-- 筛选条件2：按屏幕状态（screen_on） -->
      <div class="filter-row">
        <div class="filter-label">屏幕状态：</div>
        <select id="filter-screen-on" class="filter-input">
          <option value="">全部</option>
          <option value="1">开启（1）</option>
          <option value="0">关闭（0）</option>
        </select>
      </div>
      <!-- 筛选条件3：按亮度范围（brightness） -->
      <div class="filter-row">
        <div class="filter-label">亮度范围：</div>
        <input type="number" id="filter-brightness-min" placeholder="最小（如0）" class="filter-input" min="0" max="7">
        <input type="number" id="filter-brightness-max" placeholder="最大（如7）" class="filter-input" min="0" max="7">
      </div>
      <!-- 筛选条件4：关键词搜索（支持备注、响应数据等） -->
      <div class="filter-row">
        <div class="filter-label">关键词搜索：</div>
        <input type="text" id="filter-keyword" placeholder="搜索备注、响应Hex等" class="filter-input">
        <button id="filter-btn" class="filter-btn">执行筛选</button>
        <button id="reset-btn" class="filter-btn" style="background:#9aa0a6">重置筛选</button>
      </div>
      <!-- 筛选结果统计 -->
      <div class="filter-row">
        <div class="filter-label">筛选结果：</div>
        <div id="filter-result">当前显示 <b>14</b> 条，共 <b>14</b> 条</div>
      </div>
    </div>

    <!-- 测试结果表格 -->
    <table id="result-table">
      <thead>
        <tr>
          <th>ID</th><th>备注</th>
          <th>screen_on</th><th>brightness</th><th>digital</th><th>logo</th><th>rim_state</th><th>rdygo</th><th>turn_left</th><th>turn_right</th><th>ring</th>
          <th>发送OK</th><th>读取OK</th><th>写入响应</th><th>读取响应</th><th>写解析返回码</th><th>读解析返回码</th>
          <th>结论</th><th>校验详情</th><th>耗时(s)</th><th>时间戳</th>
        </tr>
      </thead>
      <tbody id="table-body">
        <tr data-row-index='0'><td>1</td><td>nan</td><td>1</td><td>5</td><td>50</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.137</td><td>2025-08-29 15:07:49</td></tr><tr data-row-index='1'><td>2</td><td>nan</td><td>1</td><td>6</td><td>50</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.163</td><td>2025-08-29 15:07:49</td></tr><tr data-row-index='2'><td>3</td><td>nan</td><td>1</td><td>6</td><td>50</td><td>2</td><td>2</td><td>2</td><td>1</td><td>2</td><td>0</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.202</td><td>2025-08-29 15:07:50</td></tr><tr data-row-index='3'><td>4</td><td>nan</td><td>1</td><td>6</td><td>100</td><td>0</td><td>1</td><td>2</td><td>1</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.177</td><td>2025-08-29 15:07:50</td></tr><tr data-row-index='4'><td>5</td><td>nan</td><td>1</td><td>6</td><td>100</td><td>1</td><td>0</td><td>2</td><td>0</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.208</td><td>2025-08-29 15:07:50</td></tr><tr data-row-index='5'><td>6</td><td>nan</td><td>1</td><td>6</td><td>100</td><td>2</td><td>0</td><td>2</td><td>2</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.18</td><td>2025-08-29 15:07:50</td></tr><tr data-row-index='6'><td>7</td><td>nan</td><td>1</td><td>7</td><td>50</td><td>0</td><td>0</td><td>1</td><td>2</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.197</td><td>2025-08-29 15:07:50</td></tr><tr data-row-index='7'><td>8</td><td>nan</td><td>1</td><td>7</td><td>50</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.186</td><td>2025-08-29 15:07:51</td></tr><tr data-row-index='8'><td>9</td><td>nan</td><td>1</td><td>7</td><td>50</td><td>1</td><td>1</td><td>2</td><td>0</td><td>0</td><td>1</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.202</td><td>2025-08-29 15:07:51</td></tr><tr data-row-index='9'><td>10</td><td>nan</td><td>1</td><td>7</td><td>50</td><td>2</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.184</td><td>2025-08-29 15:07:51</td></tr><tr data-row-index='10'><td>11</td><td>nan</td><td>1</td><td>7</td><td>100</td><td>1</td><td>0</td><td>1</td><td>0</td><td>2</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.207</td><td>2025-08-29 15:07:51</td></tr><tr data-row-index='11'><td>12</td><td>nan</td><td>1</td><td>7</td><td>100</td><td>1</td><td>0</td><td>2</td><td>1</td><td>0</td><td>0</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.189</td><td>2025-08-29 15:07:51</td></tr><tr data-row-index='12'><td>13</td><td>nan</td><td>1</td><td>7</td><td>100</td><td>1</td><td>0</td><td>2</td><td>1</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.193</td><td>2025-08-29 15:07:52</td></tr><tr data-row-index='13'><td>14</td><td>nan</td><td>1</td><td>7</td><td>100</td><td>1</td><td>2</td><td>1</td><td>1</td><td>0</td><td>2</td><td>FAIL</td><td>FAIL</td><td style='font-family:monospace'></td><td style='font-family:monospace'></td><td></td><td></td><td><b style='color:red'>FAIL</b></td><td>{}</td><td>0.181</td><td>2025-08-29 15:07:52</td></tr>
      </tbody>
    </table>

    <!-- 筛选逻辑 JavaScript -->
    <script>
    // 1. 获取DOM元素
    const tableBody = document.getElementById('table-body');
    const rows = tableBody.querySelectorAll('tr');
    const filterVerdict = document.getElementById('filter-verdict');
    const filterScreenOn = document.getElementById('filter-screen-on');
    const filterBrightnessMin = document.getElementById('filter-brightness-min');
    const filterBrightnessMax = document.getElementById('filter-brightness-max');
    const filterKeyword = document.getElementById('filter-keyword');
    const filterBtn = document.getElementById('filter-btn');
    const resetBtn = document.getElementById('reset-btn');
    const filterResult = document.getElementById('filter-result');

    // 2. 筛选核心函数
    function applyFilter() {
      // 获取筛选条件（去空格、转格式）
      const verdict = filterVerdict.value.trim();
      const screenOn = filterScreenOn.value.trim();
      const brightnessMin = filterBrightnessMin.value.trim() ? parseInt(filterBrightnessMin.value) : 0;
      const brightnessMax = filterBrightnessMax.value.trim() ? parseInt(filterBrightnessMax.value) : 7;
      const keyword = filterKeyword.value.trim().toLowerCase();

      let visibleCount = 0;

      // 遍历所有行，判断是否符合筛选条件
      rows.forEach(row => {
        // 获取当前行的单元格数据（按列索引对应表格列）
        const cells = row.querySelectorAll('td');
        const rowVerdict = cells[17].textContent.trim(); // 结论列（索引17）
        const rowScreenOn = cells[2].textContent.trim();  // screen_on列（索引2）
        const rowBrightness = cells[3].textContent.trim() ? parseInt(cells[3].textContent) : 0; // 亮度列（索引3）
        const rowAllText = row.textContent.trim().toLowerCase(); // 整行文本（用于关键词搜索）

        // 条件1：结论匹配
        const verdictMatch = !verdict || rowVerdict === verdict;
        // 条件2：屏幕状态匹配
        const screenOnMatch = !screenOn || rowScreenOn === screenOn;
        // 条件3：亮度范围匹配
        const brightnessMatch = rowBrightness >= brightnessMin && rowBrightness <= brightnessMax;
        // 条件4：关键词匹配（整行文本包含关键词）
        const keywordMatch = !keyword || rowAllText.includes(keyword);

        // 所有条件都满足则显示，否则隐藏
        if (verdictMatch && screenOnMatch && brightnessMatch && keywordMatch) {
          row.classList.remove('hidden');
          visibleCount++;
        } else {
          row.classList.add('hidden');
        }
      });

      // 更新筛选结果统计
      filterResult.innerHTML = `当前显示 <b>${visibleCount}</b> 条，共 <b>${rows.length}</b> 条`;
    }

    // 3. 绑定按钮事件
    filterBtn.addEventListener('click', applyFilter);
    resetBtn.addEventListener('click', () => {
      // 重置所有输入框和下拉框
      filterVerdict.value = '';
      filterScreenOn.value = '';
      filterBrightnessMin.value = '';
      filterBrightnessMax.value = '';
      filterKeyword.value = '';
      // 重置表格显示
      rows.forEach(row => row.classList.remove('hidden'));
      filterResult.innerHTML = `当前显示 <b>${rows.length}</b> 条，共 <b>${rows.length}</b> 条`;
    });

    // 4. 支持回车键触发筛选
    filterKeyword.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') applyFilter();
    });
    filterBrightnessMax.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') applyFilter();
    });

    // 5. 页面加载时默认执行一次筛选（显示全部）
    window.addEventListener('load', applyFilter);
    </script>
    </body>
    </html>
    